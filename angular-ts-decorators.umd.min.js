!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("angular"),require("reflect-metadata"),require("tslib")):"function"==typeof define&&define.amd?define(["exports","angular","reflect-metadata","tslib"],n):n(e["angular-ts-decorators"]={},e.angular,null,e.tslib_1)}(this,function(e,n,t,r){"use strict";function o(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}function i(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function a(e){return e.substr(1,e.length-2)}function c(e){return/^[\[].*[\]]$/g.test(e)}function u(e,n){return Reflect.getMetadata(e,n)}function s(e,n,t){Reflect.defineMetadata(e,n,t)}function l(e){return u(k.name,e)}function f(e){return u(k.declaration,e)}function d(e,n){var t=u(k.name,n),r=u(k.options,n),o=u(k.listeners,r.controller),i=u(k.viewChildren,n);(o||i)&&(r.controller=p(r.controller,o,i)),e.component(t,r)}function p(t,a,c){void 0===a&&(a={}),void 0===c&&(c={});var u=Object.keys(a),s=Object.keys(c),d=function(t){function d(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=t.apply(this,n)||this;return o.$element=e,o}return r.__extends(d,t),d.prototype._updateViewChildren=function(){var t=this;s.forEach(function(r){var a,u=c[r];if("string"!=typeof u.selector){var s=f(u.selector);if(s!==e.Declaration.Component&&s!==e.Declaration.Directive)return;a=i(l(u.selector))}else a="#"+u.selector;var d=Array.prototype.slice.call(t.$element[0].querySelectorAll(a)).map(function(e){var t="string"==typeof u.selector?e.localName:a,r=n.element(e),i=r&&r.controller(o(t));return u.read?new j(r):i||new j(r)}).filter(function(e){return!!e});d.length?t[r]=u.first?d[0]:d:t[r]=void 0})},d.prototype.$postLink=function(){var e=this;t.prototype.$postLink&&t.prototype.$postLink.call(this),u.forEach(function(n){var t=a[n].eventName;e.$element.on(t+".HostListener",e[n].bind(e))}),this._updateViewChildren()},d.prototype.$onChanges=function(e){t.prototype.$onChanges&&t.prototype.$onChanges.call(this,e),this._updateViewChildren()},d.prototype.$onDestroy=function(){t.prototype.$onDestroy&&t.prototype.$onDestroy.call(this),u.length&&this.$element.off(".HostListener")},d}(t);return d.$inject=["$element"].concat(t.$inject||[]),d}function v(e){var n=e.prototype;m(n).forEach(function(e){var t=A[e];n[t]=n[e]})}function m(e){return Object.keys(A).filter(function(t){return n.isFunction(e[t])})}function y(e,n){var t,r=u(k.name,n),o=u(k.options,n);v(n);var i=u(k.listeners,n),a=u(k.viewChildren,n);o.controller=i||a?p(n,i,a):n,t=function(){return o},e.directive(r,t)}function g(e,n){var t=u(k.name,n);e.controller(t,n)}function h(e,n){n.forEach(function(n){if(n.provide){var t=n.provide;n.useClass&&n.useClass instanceof Function?e.service(t,n.useClass):n.useFactory&&n.useFactory instanceof Function?(n.useFactory.$inject=n.deps||n.useFactory.$inject,e.factory(t,n.useFactory)):n.useValue&&e.constant(t,n.useValue)}else{var r=u(k.name,n);r&&e.service(r,n)}})}function b(e,n){var t=u(k.name,n),r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0].instantiate(n);return r.transform.bind(r)};r.$inject=["$injector"].concat(n.$inject||[]),e.filter(t,r)}function C(e,n,t,r){var o=e.constructor,i=u(k.bindings,o)||{};i[n]=r||t,s(k.bindings,i,o)}function $(e,n,t){var r=e.constructor,o=u(k.require,r)||{};o[n]=t,s(k.require,o,r)}function D(e,n,t,r,o){var i=e.constructor,a=u(k.viewChildren,i)||{};a[n]={first:o,selector:t,read:r},s(k.viewChildren,a,i)}var w=function(){function e(){}return e.bootstrapModule=function(e,t){void 0===t&&(t={strictDi:!1});var r;switch(typeof e){case"string":r=e;break;case"object":r=e.name;break;case"function":default:var o=e.module;if(!o)throw Error("Argument moduleType should be NgModule class, angular.module object or module name string");r=o.name}var i=!0===t.strictDi;n.element(document).ready(function(){n.bootstrap(document.body,[r],{strictDi:i})})},e}(),j=function(){return function(e){return e.nativeElement=e[0],e}}();!function(e){e.Component="Component",e.Directive="Directive",e.Pipe="Pipe",e.Controller="Controller"}(e.Declaration||(e.Declaration={}));var k={declaration:"custom:declaration",name:"custom:name",bindings:"custom:bindings",require:"custom:require",options:"custom:options",listeners:"custom:listeners",viewChildren:"custom:viewChildren"},A={ngOnInit:"$onInit",ngOnDestroy:"$onDestroy",ngDoCheck:"$doCheck",ngOnChanges:"$onChanges",ngAfterViewInit:"$postLink"},q=Function;e.platformBrowserDynamic=function(){return w},e.Component=function(n){var t=n.selector,i=r.__rest(n,["selector"]);return function(n){i.controller=n;var r=c(t),l=u(k.bindings,n);l&&(r?(i.bindToController=l,i.controllerAs=i.controllerAs||"$ctrl"):i.bindings=l);var f=u(k.require,n);f&&(i.require=f),r&&(i.restrict="A"),v(n);var d=r?a(t):t;s(k.name,o(d),n),s(k.declaration,r?e.Declaration.Directive:e.Declaration.Component,n),s(k.options,i,n)}},e.Directive=function(n){var t=n.selector,i=r.__rest(n,["selector"]);return function(n){var r=u(k.bindings,n);r&&(i.bindToController=r);var l=u(k.require,n);l&&(i.require=l,i.bindToController||(i.bindToController=!0)),i.restrict=i.restrict||"A";var f=c(t)?a(t):t;s(k.name,o(f),n),s(k.declaration,e.Declaration.Directive,n),s(k.options,i,n)}},e.Controller=function(n){return function(t){s(k.declaration,e.Declaration.Controller,t),s(k.name,n,t)}},e.Injectable=function(e){return function(n){e&&s(k.name,e,n)}},e.Inject=function(e){return function(n,t,r){t&&Array.isArray(n[t])?n[t][r]=e:n.$inject&&(n.$inject[r]=e)}},e.Pipe=function(n){return function(t){s(k.name,n.name,t),s(k.declaration,e.Declaration.Pipe,t)}},e.Input=function(e){return function(n,t){return C(n,t,"<?",e)}},e.Output=function(e){return function(n,t){return C(n,t,"&",e)}},e.ViewParent=function(e){return function(n,t){return $(n,t,e)}},e.NgModule=function(t){var r=t.id,o=(t.bootstrap,t.declarations),i=void 0===o?[]:o,a=t.imports,c=void 0===a?[]:a,s=t.providers,l=void 0===s?[]:s;return function(t){var o=c.map(function(e){return"string"==typeof e?e:e.module.name});r||(r=t.name);var a=n.module(r,o);i.forEach(function(n){switch(u(k.declaration,n)){case e.Declaration.Component:d(a,n);break;case e.Declaration.Directive:y(a,n);break;case e.Declaration.Pipe:b(a,n);break;case e.Declaration.Controller:g(a,n)}}),l&&h(a,l);var s=t.config,f=t.run;s&&a.config(s),f&&a.run(f),t.module=a}},e.HostListener=function(e,n){return function(t,r,o){var i=o.value;if("function"!=typeof i)throw new Error("@HostListener decorator can only be applied to methods not: "+typeof i);var a=t.constructor,c=u(k.listeners,a)||{};c[r]={eventName:e,args:n},s(k.listeners,c,a)}},e.ViewChild=function(e,n){return void 0===n&&(n={}),function(t,r){return D(t,r,e,n.read,!0)}},e.ViewChildren=function(e,n){return void 0===n&&(n={}),function(t,r){return D(t,r,e,n.read,!1)}},e.ElementRef=j,e.ngLifecycleHooksMap=A,e.Type=q,e.isType=function(e){return"function"==typeof e},e.metadataKeys=k,e.kebabToCamel=o,e.camelToKebab=i,e.getAttributeName=a,e.isAttributeSelector=c,e.getMetadata=u,e.defineMetadata=s,e.getTypeName=l,e.getTypeDeclaration=f,Object.defineProperty(e,"__esModule",{value:!0})});